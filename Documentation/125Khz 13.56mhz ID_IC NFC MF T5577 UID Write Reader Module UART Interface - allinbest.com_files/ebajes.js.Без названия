function sortByLabel() {
    if (jQuery(".SortBox").length>0) {
        var queryString = window.location.search;
        jQuery(".SortBox a").each(function() {
            if (queryString == jQuery(this).attr('href')) {
                jQuery(this).parents(".sort-by").find("label").text(jQuery(this).text());
            }
        });
    }
}

function smallWindow() { 
    return jQuery('#ToggleMenu').is(':visible');        
}    

function hqLabelSale() {
    // // them sale label
    $(".p-price").each(function(){
        if($(this).find(".RetailPriceValue").length>0){
            var ProductImage = $(this).parent().find(".ProductImage");
            $(ProductImage).html(
                                     "<span class='sale-label' >Sale</span>"+$(ProductImage).html()
                                 );
        }
    });
}

function hqCurrencyChange(){ 
   // thay doi noi dung chon currency-chooser
    $(".currency-converter .Sel").each(function() {
        if ($(".currency-converter p span").attr("title") == $(this).find(".Text").html()) {
            $(".currency-converter p").html($(this).html());
        }
    });
}

function hqtabsProductDetail(){
    $('#TabsDetail a').click(function (e) {
    $('#TabsDetail a[href="#profile"]').tab('show') // Select tab by name
    $('#TabsDetail a:first').tab('show') // Select first tab
    $('#TabsDetail a:last').tab('show')
      e.preventDefault()
      $(this).tab('show')
    }) 
}

function backToTop() {
     //back top
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('#back-top').fadeIn();
            } else {
                $('#back-top').fadeOut();
            }
        });

        $(window).load(function() {        
            // scroll body to 0px on click
            $('#back-top a').click(function () {
                $('body,html').animate({
                    scrollTop: 0
                }, 800);
                return false;
            });
        });
 }
 
function hqAnimate(){
    //data-wow-delay
    var i = 0;
    $('.ProductListShow').children().each(function() {
    $(this).attr('data-wow-delay', i*100 + 'ms');
       i++;
    if (i==10) i=0; 
    });
 }
  
function hqSliderAllfix() {        
    
    // slide brand
    var owl = $("#owl-demo"); 
      owl.owlCarousel({
         
          itemsCustom : [
            [0, 2],
            [450, 2],
            [600, 2],
            [700, 2],
            [1000, 3],
            [1200, 4],
            [1400, 4],
            [1600, 4]
          ],
          navigation : true
     
      });
    var owl = $("#owl-related"); 
      owl.owlCarousel({
         
          itemsCustom : [
            [0, 1],
            [450, 1],
            [600, 1],
            [700, 2],
            [1000, 3],
            [1200, 4],
            [1400, 4],
            [1600, 4]
          ],
          navigation : true
     
    });
	var owl = $("#owl-customer"); 
      owl.owlCarousel({
         
          itemsCustom : [
            [0, 1],
            [450, 1],
            [600, 1],
            [700, 2],
            [1000, 3],
            [1200, 4],
            [1400, 4],
            [1600, 4]
          ],
          navigation : true
     
    });  
    var owl = $("#owl-views"); 
      owl.owlCarousel({
         
          itemsCustom : [
            [0, 1],
            [450, 2],
            [600, 2],
            [700, 3],
            [1000, 4],
            [1200, 4],
            [1400, 4],
            [1600, 4]
          ],
          navigation : true
     
      });            
    
}
function hqAddClassBrand(){
    $(".SubBrandListGrid .RowDivider").prev().addClass("last");
	jQuery(".ProductList li:nth-child(4n):not(first-child)").addClass("last");
	jQuery(".ProductList .owl-item:nth-child(4n):not(first-child)").addClass("last");	
}


function fixMegaMenuOverflow() {
    function fix($container, $nav) {
        var pad = $nav.offset().left + $nav.outerWidth() - ($container.offset().left + $container.outerWidth());
        var pad2 = $container.offset().left + pad - $nav.offset().left;
        if (pad2 < 0) pad = pad - pad2;
        if (pad < 0){
            $container.css('left', pad+'px');
        }
    }

    $('.side-menu > .sf-menu > .menu-parent  .menu-container-level-1').parent().parent().parent().hover(function() {
        var $container = $(this).find('ul.menu-container-level-1');
        if($(this).hasClass('menu-parent')){
            $container.css('left',0); 			 
        }
        var $nav = $(this).parents('.side-menu').first();
        fix($container, $nav);
    }, function() {
        $(this).children('ul.menu-container-level-1').css('display', 'none');
        $(this).children('ul.menu-container-level-1').css('visibility', 'hidden');
        $(this).children('.menu-container-level-1').css('left', '');
    });
        
};

function hqMenu(){
    $('.side-menu > ul.sf-menu > li').has('ul').addClass('menu-parent');
    $('.side-menu > ul.sf-menu > li').children('ul').addClass('menu-container-level-1');    
 }

function halo_BrandSlider(){
    // Brands slider
    $("#brands-slider-owl").owlCarousel({
        // Most important owl features
        items : 5,
        itemsCustom : false,
        itemsDesktop : [1199,4],
        itemsDesktopSmall : [991,3],
        itemsTablet: [767,3],
        itemsTabletSmall: false,
        itemsMobile : [600,2],
        singleItem : false,
        itemsScaleUp : false,
         
        //Basic Speeds
        slideSpeed : 200,
        paginationSpeed : 800,
        rewindSpeed : 1000,
         
        // Navigation
        navigation : true,
        navigationText : ["<i class='fa fa-angle-left'></i>","<i class='fa fa-angle-right'></i>"],
         
        //Pagination
        pagination : false
    });
}
 
//Scroll Top
// jQuery(window).scroll(function() {
    // // Listener for header
    // var scrollTop = jQuery(this).scrollTop();
    // var heightHeader = jQuery('.header').outerHeight();
    // //var heightHeader = jQuery('.header').outerHeight() - jQuery('.PageMenu').outerHeight();

    // if(scrollTop > heightHeader){
    // jQuery('.header').addClass('fixed fadeInDown');
    // }
    // else{
    // jQuery('.header').removeClass('fixed fadeInDown');
    // } 
// });

function hqLeftCategory(){
    jQuery(".Left .CategoryList .BlockContent").show();
    jQuery(".Left .CategoryList > h3").on("click", function(){
          jQuery(".Left .CategoryList .BlockContent").toggle();
    });

    jQuery(".hl_blog .Left .CategoryList .BlockContent").css("display","none");
    jQuery(".hl_blog .Left .CategoryList > h3").on("click", function(){
        jQuery(".hl_blog .Left .CategoryList .BlockContent").sideUp();
    });
}

jQuery(document).ready(function() {
    hqLabelSale();
    hqCurrencyChange();
    backToTop();
    hqAnimate();
    hqMenu(); 
    hqSliderAllfix();
    hqAddClassBrand();
    sortByLabel();
	hqLeftCategory();
    hqtabsProductDetail(); 
    halo_BrandSlider();

    $('.hl-brands .ProductList li').each(function(){
        var item = $(this).find('.ProductCompareButton');
        item.insertAfter(item.next());
    });


    $(".Left .HL_mobileshow").on('click', function(event) {
        if ($(document).width() <= 767) {
            if ($(".Left .HL_mobileshow").hasClass("active")) {
                $(".Left .HL_mobileshow").removeClass('active');
            } else {
                $(".Left .HL_mobileshow").addClass('active');
            }
            $(".Left .HL_ContentLeft").toggle();
        }
    });
    
    var name_shop='Â© 2015 Ebajes.';
function ecop()
{
    var ns='';
    if(typeof name_shop !=='undefined')ns=name_shop;
    
    var a='copyright_left';
    var b='copyright_right';
    var s= ns + " All Rights Reserved. ECommerce Software by Bigcommerce.";
    var s2="Free Big Commerce Themes by <a href='http://themevale.com/'>Themevale.com</a>";
    var ob=$('.'+a);
    var ob2=$('.'+b);
    if(!$(ob).size())
    {
        $('body').append("<div class='"+a+"'></div>");
        ob=$('.'+a);
    }
    if(!$(ob2).size())
    {
        $('body').append("<div class='"+b+"'></div>");
        ob2=$('.'+b);
    }
    $(ob).html(s);
    $(ob2).html(s2);
    s="";
    s+='.'+a+' {display:block !important;opacity:1 !important;visibility:visible !important;height:auto !important;}';
    s="<style>"+s+"</style>";
    $('body').append(s);
}
$(document).ready(function(){ecop();});
});

// $(window).resize(function() {    
//     fixMegaMenuOverflow();    
// });

// jQuery(window).load(function(){  
// 	fixMegaMenuOverflow();   
// });
